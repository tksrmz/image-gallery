<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Image Gallery</title>
  <style>
    .image-container { display: flex; flex-wrap: wrap; }
    .image-box { padding: 10px; }
    img { width: 200px; }
    .pagination {text-align: center; margin-top: 20px; }
    .page-link { margin: 0 5px; }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><span>Gallery</span></li>
      <li><a href="{{ url_for('upload_file') }}">Upload</a></li>
    </ul>
  </nav>

  <h1>Image Gallery</h1>
  <h2>Filtered by</h2>
  <ul>
    {% if title %}
      {% if tag %}
        <li>Title: {{ title }} (<a href="/?tag={{ tag }}">Clear</a>)</li>
      {% else %}
        <li>Title: {{ title }} (<a href="/">Clear</a>)</li>
      {% endif %}
    {% endif %}
    {% if tag %}
      {% if title %}
        <li>Tag: {{ tag }} (<a href="/?title={{ title }}">Clear</a>)</li>
      {% else %}
        <li>Tag: {{ tag }} (<a href="/">Clear</a>)</li>
      {% endif %}
    {% endif %}
  </ul>
  <div class="image-container">
    {% for image in image_files %}
      <div class="image-box">
        <a href="{{ url_for('send_image', filename=image) }}">
          <img src="{{ url_for('static', filename='images/' + image) }}" alt="{{ image }}">
        </a>
      </div>
    {% endfor %}
  </div>
  <div class="pagination">
    {% for page_num in range(1, total_pages + 1) %}
      {% if page_num == current_page %}
        <span class="page-link">{{ page_num }}</span>
      {% else %}
        {% if title and tag %}
          <a href="/?page={{ page_num }}&title={{ title }}&tag={{ tag }}" class="page-link">{{ page_num }}</a>
        {% elif title %}
          <a href="/?page={{ page_num }}&title={{ title }}" class="page-link">{{ page_num }}</a>
        {% elif tag %}
          <a href="/?page={{ page_num }}&tag={{ tag }}" class="page-link">{{ page_num }}</a>
        {% else %}
          <a href="/?page={{ page_num }}" class="page-link">{{ page_num }}</a>
        {% endif %}
      {% endif %}
    {% endfor %}
  </div>
</body>
</html>

